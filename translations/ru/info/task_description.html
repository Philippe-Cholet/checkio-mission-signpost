<!-- Describe task in general -->
<p> <!-- Introduction -->
    Эта миссия является адаптацией игры "Указатель" (из
	<a href="https://www.chiark.greenend.org.uk/~sgtatham/puzzles/">
	коллекции головоломок Саймона Тэтхема</a>).
	Если вы не знакомы с этой игрой, или просто хотите поиграть, то вам
    <a href="https://www.chiark.greenend.org.uk/~sgtatham/puzzles/js/signpost.html">сюда</a>.
</p>

<p> <!-- Quick description -->
    Вы на прямоугольной сетке. Вам предстоит найти путь, чтобы пройти по всей сетке,
    следуя указанным направлениям. Начало пути и конец пути имеют порядковые номера шагов
    равные 1 и len(grid)*len(grid[0]) соответственно. Некоторые клетки так же могут иметь
    порядковые номера шагов в вашем пути, менять их НЕ допускается.
</p>

<p>
    Числа означают порядковые номера шагов в пути, начиная с 1. Например,
    поле с номером 9 указывает, что это поле является девятым в пути.
</p>

<p> <!-- Representation -->
    Пустые поля представлены нулями.
    Возможные направления:
    север 'N', северо-запад 'NW', запад 'W', юго-запад 'SW',
    юг 'S', юго-восток 'SE', восток 'E', северо-восток 'NE'
    и ничего ''(конец пути).
</p>

<p> <!-- What return? -->
    Вам предстоит вернуть заполненную сетку, представляющую собой путь.
</p>

<pre class="for_info_only" style="text-align:center">
<img src="{{MEDIA}}example-input.png" alt="5x5 example image" title="5x5 example"/>
<img src="{{MEDIA}}example-output.png" alt="5x5 example image" title="5x5 example"/>

[[1, 0, 0, 0,  0],  (('SE', 'E' , 'SW', 'S' , 'S' ),       [[ 1, 13,  3, 14, 21],
 [0, 0, 9, 0, 18],   ('E' , 'W' , 'S' , 'NE', 'SW'),        [ 8,  7,  9, 20, 18],
 [0, 0, 0, 0,  0],   ('S' , 'N' , 'N' , 'N' , 'S' ),  ===\  [ 4,  6,  2, 19, 22],
 [0, 0, 0, 0,  0],   ('NE', 'N' , 'NE', 'SE', 'W' ),  ===/  [ 5, 12, 17, 24, 23],
 [0, 0, 0, 0, 25]]   ('NE', 'NE', 'W' , 'W' , ''  ))        [11, 16, 10, 15, 25]]
</pre>


<!-- Explain input and output values -->
<p>
    <strong>Входные данные:</strong>
    Список, состоящий из списков, содержащих целые числа, и кортеж, состоящий из кортежей,
    содержащих строки.
</p>

<p>
    <strong>Выходные данные:</strong>
    Список (или кортеж), состоящий из списков (или кортежей), содержащих целые числа.
</p>


<!-- Put some usage examples -->
<div class="for_info_only">
<p>
    <strong>Пример:</strong>
</p>

<pre class="brush: python">
signpost([[1, 0, 0],
          [0, 0, 0],
          [0, 0, 9]],
         (('S' , 'E' , 'S' ),
          ('S' , 'S' , 'NW'),
          ('NE', 'NE', ''  ))) == [[1, 7, 8],
                                   [2, 4, 6],
                                   [3, 5, 9]]
signpost([[1, 0, 0, 0,  0],
          [0, 0, 9, 0, 18],
          [0, 0, 0, 0,  0],
          [0, 0, 0, 0,  0],
          [0, 0, 0, 0, 25]],
         (('SE', 'E' , 'SW', 'S' , 'S' ),
          ('E' , 'W' , 'S' , 'NE', 'SW'),
          ('S' , 'N' , 'N' , 'N' , 'S' ),
          ('NE', 'N' , 'NE', 'SE', 'W' ),
          ('NE', 'NE', 'W' , 'W' , ''  ))) == [[ 1, 13,  3, 14, 21],
                                               [ 8,  7,  9, 20, 18],
                                               [ 4,  6,  2, 19, 22],
                                               [ 5, 12, 17, 24, 23],
                                               [11, 16, 10, 15, 25]]
</pre>
</div>

<p>
    <strong>Предусловия:</strong>
    <ul>
        <li>Все предоставленные головоломки имеют решение.</li>
        <li>3 &le; len(grid) &le; 30 and 3 &le; len(grid[0]) &le; 50.</li>
        <li>len(grid) == len(directions) and all(len(row1) == len(row2) == len(grid[0]) for row1, row2 in zip(grid, directions)).</li>
    </ul>
</p>
